<!DOCTYPE html>
<html>
  <head>
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <script src="https://cdn.jsdelivr.net/npm/@observablehq/plot@0.6"></script>
    <style>
        svg {
            width: 100%;
        }
    </style>
  </head>
  <body>

    <div id="chart"></div>

    <script type="text/javascript">
        const months = [
            "January", "February", "March", "April", "May", "June",
            "July", "August", "September", "October", "November", "December"
        ];
    
        // Convert months to Date objects for sorting
        const sortedMonths = months.map(month => new Date(`2022-${month}-01`));
    
        // Initialize an empty array for prices
        const prices = [];
    
        // Generate random prices and colors
        for (let i = 0; i < sortedMonths.length; i++) {
            const price = Math.random() * 100;
            const color = i > 0 ? (prices[i - 1].price < price ? "green" : "red") : "blue";
    
            prices.push({
                month: sortedMonths[i],
                price: price,
                color: color
            });
        }
    
        const plot = Plot.plot({
            x: {
                grid: true,
                ticks: sortedMonths,
                label: "Month",
                tickFormat: date => date.toLocaleString('default', { month: 'long' }) // Format tick labels
            },
            y: {
                grid: true,
                label: "Price"
            },
            marks: [
                Plot.ruleY([0]),
                Plot.barY(prices, { x: "month", y: "price", fill: "color" }),
                Plot.crosshair(prices, {x: "month", y: "price"}),
                Plot.tip(prices, Plot.pointerX({x: "month", y: "price"}))
            ],
            events: {
            hover: (event, plot) => {
                const values = plot.hover.points.map(point => ({
                    month: point.data.month.toLocaleString('default', { month: 'long' }),
                    price: point.data.price.toFixed(2)
                }));

                // Display values in a tooltip or console
                console.log(values);
            },
            tip: true
        }
        });
    
        const div = document.querySelector("#chart");
        div.append(plot);
    </script>
        
  </body>
</html>